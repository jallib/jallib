<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>lcd_hd44780_4 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="lcd_hd44780_4">
    <h1>lcd_hd44780_4</h1>
	</a>

    <div>
		<font size="+1"><i>LCD library for HD44780 compatible LCDs, with 4 bits wide datatransfer</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Rob Hamerling, Copyright (c) 2008..2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Eur van Andel, Joep Suijs (refactoring),Richard Zengerink (lcd_init)
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>   Nibble interface for HD44780 compatible alphanumeric LCD screens.
.
   Expects: - 2 pins for handshake: 'lcd_rs' and 'lcd_en'
        and
            - 1 port nibble for data: 'lcd_dataport'
        or
            - 4 lines for data: 'lcd_d4' .. 'lcd_d7'
   note:    a 'port nibble' - the lower or higher 4 bits of a port - give
            faster and more compact code then random selected data lines.
.
   Directions for use of this library in application programs
   (in this sequence):
   1. Declare the following constants:
         const byte LCD_ROWS     = 2              -- 1, 2 or 4 lines
         const byte LCD_CHARS    = 16             -- 8, 16 or 20 chars per line
      and variables (aliases):
         var   bit  lcd_en        is  pin_A4      -- trigger
         var   bit  lcd_rs        is  pin_A5      -- cmd/data select
      and variables (aliases):
         var   byte lcd_dataport  is  portA_low   -- 4 data pins
      or
         var   bit  lcd_d4        is  pin_A3      -- databit d4 pin
         var   bit  lcd_d5        is  pin_A1      -- databit d5 pin
         var   bit  lcd_d6        is  pin_C0      -- databit d6 pin
         var   bit  lcd_d7        is  pin_C2      -- databit d7 pin
.
   2. Set the chosen LCD dataport and handshake pins to output:
         pin_A4_direction    = output
         pin_A5_direction    = output
      and
         portA_low_direction = all_output
      or
         pin_A3_direction    = output            -- set data pin as output
         pin_A1_direction    = output            -- set data pin as output
         pin_C0_direction    = output            -- set data pin as output
         pin_C2_direction    = output            -- set data pin as output
.
   3. Include this library.
.
   4. Call lcd_init() to initialize the lcd controller.
.
   Above is an example for a 2x16 LCD.
.
   See hd_44780_common for the LCD API.
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="delay.html">delay</a></li>
			<li><a href="lcd_hd44780_common.html">lcd_hd44780_common</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#4410092e4a5aa77dfdbe318daf02653d">lcd_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#261800f5e10f1f652cddd98e6758daaa">lcd_debug_hardware_interface(byte in speed)</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#6894201db0dea63be78ef1e0ee331a81">__lcd_write_nibble( byte in value )</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#22976e287f46fb244c08ba13aed60ed3">__lcd_write( byte in value )</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#08afb6b553518b98d5de22b408045927">_lcd_write_command(byte in value)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#887e1be593e095a6363a48df31fd9dd0">_lcd_write_data(byte in value)</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="4410092e4a5aa77dfdbe318daf02653d" href="#summary">lcd_init()</a></code></b>
				<p>	<pre>
Initialize LCD controller to 4-bit mode

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="261800f5e10f1f652cddd98e6758daaa" href="#summary">lcd_debug_hardware_interface(byte in speed)</a></code></b>
				<p>	<pre>
Pulse interface lines in sequence d0 .. d3, en, rs. Use an
oscilloscope (speed = 1) or leds (speed = 200) to check signal.
Note: procedure contains 'forever loop', so never returns. 

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="6894201db0dea63be78ef1e0ee331a81" href="#summary">__lcd_write_nibble( byte in value )</a></code></b>
				<p>	<pre>
Sends low nibble in <value> to LCD
Can be used for both commands and data
(requires no wait cycli inbetween upper and lower nibble)
(this routine is only used inside this file)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="22976e287f46fb244c08ba13aed60ed3" href="#summary">__lcd_write( byte in value )</a></code></b>
				<p>	<pre>
Sends byte in <value> to LCD
(this procedure is only used inside this library)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="08afb6b553518b98d5de22b408045927" href="#summary">_lcd_write_command(byte in value)</a></code></b>
				<p>	<pre>
Sends command byte in <value> to LCD
For slow commands an extra delay should be added

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="887e1be593e095a6363a48df31fd9dd0" href="#summary">_lcd_write_data(byte in value)</a></code></b>
				<p>	<pre>
Sends data byte in <value> to LCD

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_lcd_hd44780_4_4.jal" target="_blank">16f648a_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_lcd_hd44780_4bit.jal" target="_blank">16f648a_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_backlight.jal" target="_blank">16f648a_backlight.jal</a></td>
			</tr>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_lcd_hd44780_4_1.jal" target="_blank">16f648a_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f676</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f676_lcd_hd44780_4_4.jal" target="_blank">16f676_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f676</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f676_lcd_hd44780_4_1.jal" target="_blank">16f676_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f690</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f690_lcd_hd44780_4_4.jal" target="_blank">16f690_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f690</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f690_lcd_hd44780_4_1.jal" target="_blank">16f690_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f726</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f726_lcd_hd44780_4_4.jal" target="_blank">16f726_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f726</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f726_lcd_hd44780_4_1.jal" target="_blank">16f726_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f727</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f727_lcd_hd44780_4_1.jal" target="_blank">16f727_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f727</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f727_lcd_hd44780_4_4.jal" target="_blank">16f727_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_lcd_hd44780_4_4.jal" target="_blank">16f819_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_lcd_hd44780_4_1.jal" target="_blank">16f819_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_keyboard_lcd.jal" target="_blank">16f876a_keyboard_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_t6603.jal" target="_blank">16f876a_t6603.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_lcd_hd44780_4_1.jal" target="_blank">16f876a_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_rtc_timeset.jal" target="_blank">16f876a_rtc_timeset.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_sht.jal" target="_blank">16f876a_sht.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_rtc_lcd.jal" target="_blank">16f876a_rtc_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_tc77.jal" target="_blank">16f876a_tc77.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_lcd_hd44780_4_4.jal" target="_blank">16f876a_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_backlight.jal" target="_blank">16f877_backlight.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_lcd_hd44780_4bit.jal" target="_blank">16f877_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_lcd_format.jal" target="_blank">16f877a_lcd_format.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_co2_t6603.jal" target="_blank">16f877a_co2_t6603.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_keyboard_lcd.jal" target="_blank">16f877a_keyboard_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_rtc_lcd.jal" target="_blank">16f877a_rtc_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_lcd_hd44780_4bit.jal" target="_blank">16f877a_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_lcd_hd44780_4_1.jal" target="_blank">16f877a_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_backlight.jal" target="_blank">16f877a_backlight.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_rtc_timeset.jal" target="_blank">16f877a_rtc_timeset.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_lcd_hd44780_4_4.jal" target="_blank">16f877a_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_lcd_hd44780_4_1.jal" target="_blank">16f88_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_lcd_hd44780_4_4.jal" target="_blank">16f88_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_lcd_hd44780_4bit.jal" target="_blank">16f88_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_backlight.jal" target="_blank">16f88_backlight.jal</a></td>
			</tr>
			<tr>
			<td><b>16f886</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f886_rtc_lcd_4mhz.jal" target="_blank">16f886_rtc_lcd_4mhz.jal</a></td>
			</tr>
			<tr>
			<td><b>16f886</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f886_pwm_adc_freq.jal" target="_blank">16f886_pwm_adc_freq.jal</a></td>
			</tr>
			<tr>
			<td><b>16f886</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f886_rtc_lcd_20mhz.jal" target="_blank">16f886_rtc_lcd_20mhz.jal</a></td>
			</tr>
			<tr>
			<td><b>16f886</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f886_rtc_lcd_125khz.jal" target="_blank">16f886_rtc_lcd_125khz.jal</a></td>
			</tr>
			<tr>
			<td><b>16f886</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f886_pwm_adc_res.jal" target="_blank">16f886_pwm_adc_res.jal</a></td>
			</tr>
			<tr>
			<td><b>16f887</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f887_lcd_hd44780_4_4.jal" target="_blank">16f887_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>16f887</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f887_lcd_hd44780_4_1.jal" target="_blank">16f887_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f1230</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f1230_lcd_hd44780_4_1.jal" target="_blank">18f1230_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2320</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2320_lcd_hd44780_4_1.jal" target="_blank">18f2320_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2320</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2320_lcd_hd44780_4_4.jal" target="_blank">18f2320_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2450</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2450_lcd_hd44780_4bit.jal" target="_blank">18f2450_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>18f25j10</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f25j10_test_mlx90615.jal" target="_blank">18f25j10_test_mlx90615.jal</a></td>
			</tr>
			<tr>
			<td><b>18f26j11</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f26j11_rtc_hardware.jal" target="_blank">18f26j11_rtc_hardware.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_lcd_hd44780_4bit.jal" target="_blank">18f4550_lcd_hd44780_4bit.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4685</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4685_lcd_hd44780_4_1.jal" target="_blank">18f4685_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4685</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4685_lcd_hd44780_4_4.jal" target="_blank">18f4685_lcd_hd44780_4_4.jal</a></td>
			</tr>
			<tr>
			<td><b>18f6310</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f6310_lcd_hd44780_4_1.jal" target="_blank">18f6310_lcd_hd44780_4_1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f6310</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f6310_lcd_hd44780_4_4.jal" target="_blank">18f6310_lcd_hd44780_4_4.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

