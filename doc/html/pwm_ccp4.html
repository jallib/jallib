<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>pwm_ccp4 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="pwm_ccp4">
    <h1>pwm_ccp4</h1>
	</a>

    <div>
		<font size="+1"><i>hardware PWM control, dedicated to module CCP4</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Stef Mientki, Copyright (C) 2002-2006, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong, Rob Hamerling.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4l
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Performs PWM operations on the CCP4 module.
This file is automatically included by pwm_hardware.jal
when the target PIC has a CCP4 module.
</pre>

	</p>
	<br/>


	<b>Notes</b>
	<p>
		<pre>1. This is a heavy refactoring of the original pwm_hardware.jal
          (Stef's lib)
       2. Partly rewritten for JalV2 version 2.4l and Jallib revision 1171.
          Reduced memory occupation. Added procedure for lowres PWM.
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#b095f7f0e9563e98514678664e3c9bfd">var bit*4 _ccp4con_shadow_ccp4m at _ccp4con_shadow : 0    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#32e79200bc35e757fd4ca7eba736fea8">var bit*2 _ccp4con_shadow_dc4b  at _ccp4con_shadow : 4    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#37158e57be7303065166a61b70264797">var byte  _ccp4con_shadow = 0b0000_0000                  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#927b90385646f8071ff7f8ea3ed6bd31">var byte  _ccpr4l_shadow  = 0                            </a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#0be52ff0be32426f79499b7dbcd72d2f">pwm4_set_dutycycle_lowres(byte in duty)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d8cbf61ac3670cde9fbe644d17a0182f">pwm4_off()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#80d40d005123b099958dfdb3d1ef0d21">pwm4_on()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#fccbef6fb33d4093ade42217ebe9c420">pwm4_set_percent_dutycycle(byte in percent)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ae2cfa8066b6858031cdcc32b5964991">pwm4_set_dutycycle(byte in duty)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7b465c8943fafdaa98e4358cdd7ee126">pwm4_set_dutycycle_highres(word in duty)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="b095f7f0e9563e98514678664e3c9bfd" href="#summary">var bit*4 _ccp4con_shadow_ccp4m at _ccp4con_shadow : 0    </a></code></b>
				<p>	<pre>mode pattern</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="32e79200bc35e757fd4ca7eba736fea8" href="#summary">var bit*2 _ccp4con_shadow_dc4b  at _ccp4con_shadow : 4    </a></code></b>
				<p>	<pre>2 LSbits of duty cycle</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="37158e57be7303065166a61b70264797" href="#summary">var byte  _ccp4con_shadow = 0b0000_0000                  </a></code></b>
				<p>	<pre>shadow</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="927b90385646f8071ff7f8ea3ed6bd31" href="#summary">var byte  _ccpr4l_shadow  = 0                            </a></code></b>
				<p>	<pre>8 MSbits of duty cycle</pre>
</p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="0be52ff0be32426f79499b7dbcd72d2f" href="#summary">pwm4_set_dutycycle_lowres(byte in duty)</a></code></b>
				<p>	<pre>Set dutycycle with 8-bits resolution allowing 255 PWM steps.
The 'duty' argument is the 8-bits absolute value for the duty cycle:
 * duty<1:0> are the 2 LSbits
 * duty<7:2> are the 6 MSbits
Allowed range: 0..255
Beware that steps 256..1023 are not available. In other words
the available PWM range is 25% of the highres procedure.
This procedure is particularly suitable with higher frequencies
whereby the PWM resolution is limited to 256 steps or less!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d8cbf61ac3670cde9fbe644d17a0182f" href="#summary">pwm4_off()</a></code></b>
				<p>	<pre>PWM mode off
retain duty cycle setting in shadow registers
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="80d40d005123b099958dfdb3d1ef0d21" href="#summary">pwm4_on()</a></code></b>
				<p>	<pre>PWM mode on
Restore duty cycle from shadow registers
Note: pin_CCP4_direction should be set to output!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="fccbef6fb33d4093ade42217ebe9c420" href="#summary">pwm4_set_percent_dutycycle(byte in percent)</a></code></b>
				<p>	<pre>Set a percentage duty cycle, allowing max 100 PWM steps.
Allowed range: 0..100
The duty cycle will be set to the specified percentage of the maximum
for the current PWM frequency.
Note: The number of available PWM steps can be lower than 100 with
(very) high PWM frequencies.
Note: pin_CCP4_direction should be set to output!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ae2cfa8066b6858031cdcc32b5964991" href="#summary">pwm4_set_dutycycle(byte in duty)</a></code></b>
				<p>	<pre>Set dutycycle for 10-bits resolution but allowing only 255 PWM steps.
This procedure is equivalent to pwm4_set_dutycycle_highres(), but
the low order 2 bits of the 10-bits duty cycle are set to 0.
This means that only every 4th of the available 1023 steps can be selected
and consequently max 255 PWM steps are available.
This procedure is for user convenience, allowing to specify an 8 bits
value for the duty cycle is for many applications satisfactory.
Calling this procedure will also activate PWM.
Note: pin_CCP4_direction should be set to output!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7b465c8943fafdaa98e4358cdd7ee126" href="#summary">pwm4_set_dutycycle_highres(word in duty)</a></code></b>
				<p>	<pre>Set dutycycle with 10-bits resolution, allowing 1024 PWM steps.
The 'duty' argument is a (max) 10-bits absolute value for the duty cycle:
 * duty<1:0> are the 2 LSbits
 * duty<9:2> are the 8 MSbits
Allowed range: 0..1023
Note: pin_CCP4_direction should be set to output!
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
		<i>No sample found</i>

			<br/>

            </div>
        </div>


	</body>
</html>

