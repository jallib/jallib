
procedure Vloersensor is
	var word SensorTmp

   ;--------------------------------------------------------------------------
   ; de rise time van de sensor is 0.4 ms (na uitschakelen led)
   ; de fall time van de sensor is 0.2 ms (na inschakelen led)
   ; (nog nakijken: dit zijn de waarden van de linedetector van mbot)
   ;--------------------------------------------------------------------------

   ;--------------------------------------------------------------------------
   ; measure sensor with IR leds ON
   pin_a4_direction = output
   pin_a4 = false
   
   delay_10us(20)

  	LineL = ADC_read(0)
  	LineR = ADC_read(1)
	
   ;--------------------------------------------------------------------------
   ; measure sensor with IR leds off
   pin_a4 = true
   delay_10us(40)

   SensorTmp = ADC_read(0)
   if (LineL < SensorTmp) then
		LineL = SensorTmp - LineL  	
	else
		LineL = 0
   end if

   SensorTmp = ADC_read(1)
   if (LineR < SensorTmp) then
		LineR = SensorTmp - LineR  	
	else
		LineR = 0
   end if
   
end procedure