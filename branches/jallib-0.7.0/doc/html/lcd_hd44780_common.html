<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>lcd_hd44780_common - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="lcd_hd44780_common">
    <h1>lcd_hd44780_common</h1>
	</a>

    <div>
		<font size="+1"><i>common library for HD44780 based LCD</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Richard Zengerink, Copyright (c) 2008..2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Joep Suijs,
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4j
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Common API for HD44780 based LCD
.
 Procedures which can be used by application program:
.
* lcd_write_char( byte in value ):
  writes 'value' to lcd
  example: lcd_write_char( "E" )  or lcd_write_char( 69 )
.
* lcd = value:
  writes 'value' to lcd
  example: lcd = "E"  or lcd = 69
.
* lcd_cursor_position(byte in line, byte in pos):
  places the cursor on position (pos) in line (line) (zero based!)
  example: lcd_new_line_cursor_position (1, 8)
.
* lcd_shift_left(byte in value):
  shifts the display [value] times to the left without changing DDRAM data.
  example: lcd_shift_left(4)
  or       lcd_shift_left(variable)
.
* lcd_shift_right(byte in value):
  shifts the display [value] times to the right without changing DDRAM data.
  example: lcd_shift_right(12)
  or       lcd_shift_right(variable)
.
* lcd_cursor_shift_left(byte in value):
  shifts the cursor [value] times to the left without changing display
  contents and DDRAM data.
  example: lcd_cursor_shift_left(8)
  or       lcd_cursor_shift_left(variable)
.
* lcd_cursor_shift_right(byte in value):
  shifts the cursor [value] times to the right without changing display
  contents and DDRAM data.
  example: lcd_cursor_shift_right(3)
  or       lcd_cursor_shift_right(variable)
.
* lcd_clear:
  Write "20H" to DDRAM and set DDRAM address to "00H" from AC
  This will clear the display.
.
* lcd_home:
  Set DDRAM address to "00H" from AC and return cursor to its original
  position if shifted. The contents of DDRAM are not changed.
.
* lcd_cursor_blink_display(bit in cursor,bit in blink,bit in display):
  sets the underline cursor on/off, let the block-cursor blinking/off
  and puts the display on/off
  example: lcd_cursor_blink_display(on,off,on)
.
* lcd_clear_line ( byte in line  )
  clears the line [line] of the lcd including DDRAM data of that line
  example: lcd_clear_line(1)
.
* lcd_progress(byte in line, byte in amount)
  create a progress bar on line [line] with a lenght of [amout]
  example: lcd_progress(2,12)
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#5ec059d7643c0393168a89a9adc11d90">const LCD_DISPLAY_SHIFT_RIGHT = 0b_0001_1100
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b91ed5039e4eb7013e23a473079c5309">const LCD_CURSOR_SHIFT_R_VAL  = 0b_0001_0100
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#64c16e109d3549c0436c4ba4564de5eb">const LCD_DISPLAY_SHIFT_LEFT  = 0b_0001_1000
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#be73c4adede9dc2450b949550ac974e7">const LCD_CLEAR_DISPLAY       = 0b_0000_0001
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e30dea6c0bf29ddb14920afbbb2f9862">const LCD_RETURN_HOME         = 0b_0000_0010
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#568beb03b3d4582d08df3566935ae1e7">const LCD_SET_DDRAM_ADDRESS   = 0b_1000_0000
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6e81fecb5b834b288bbb3712ab25d4e9">const LCD_SET_CGRAM_ADDRESS   = 0b_0100_0000
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#880a2ebac787a222ef88203208a2752e">const LCD_DISPLAY_ONOFF       = 0b_0000_1000
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c244f7aefd3bd0ea85be37b946c9430c">var volatile byte lcd_pos     = 0
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3ee03cb644ec21d386db633bf95636f0">const LCD_CURSOR_SHIFT_L_VAL  = 0b_0001_0000
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#2fd59388b0fd1add3738a9465b2112ce">lcd_clear_screen() </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2fc7eb74beef5bf4f0b500f28e5693b9">lcd_clear_line(byte in line)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5898d2e7f83c2da9c8d19cb3dd76b13a">lcd_shift_right(byte in nr)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#301643c918af15560fd8e280383dbf09">lcd_writechar(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#206bb161606abb5d9c04d67eafa6f00f">lcd_cursor_blink_display(bit in cursor, bit in blink, bit in display)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a90ac48fecc26b742b94fbeb3e5151ca">lcd_cursor_shift_right(byte in nr)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#448216e2d5435278e723f928abc23c65">lcd_shift_left(byte in nr)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0ac48cf34393827d28c94f1be2cc1077">lcd_clearscreen() </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1e00a72bbf8b23b9caa387369647867a">lcd_home() </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ba7f1015df54edd5a5c4c01371ec02b1">lcd_write_char(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#23eee674117ffffe8e1e6e7074e9ce21">lcd_cursor_position(byte in line, byte in pos)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#78d026ee2877c7ab88bb9cc511df6ddd">lcd'put(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c8519c651b1c7a5ef104c58d14c6b568">lcd_cursor_shift_left(byte in nr)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#074b81381b23e1d5738a15958af57401">lcd_progress(byte in line, byte in amount, byte in pattern)</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#a0230e579fe2817fe6b16d876e1eac3a">_lcd_restore_cursor()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#fdb82cfd301a22ca3557543e9025de63">_hd44780_init()</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#04cc129a3e53b33917468b78565c9077">_lcd_line2index(byte in line) return byte</a></code></b>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="5ec059d7643c0393168a89a9adc11d90" href="#summary">const LCD_DISPLAY_SHIFT_RIGHT = 0b_0001_1100
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b91ed5039e4eb7013e23a473079c5309" href="#summary">const LCD_CURSOR_SHIFT_R_VAL  = 0b_0001_0100
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="64c16e109d3549c0436c4ba4564de5eb" href="#summary">const LCD_DISPLAY_SHIFT_LEFT  = 0b_0001_1000
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="be73c4adede9dc2450b949550ac974e7" href="#summary">const LCD_CLEAR_DISPLAY       = 0b_0000_0001
</a></code></b>
				<p>	<pre>
some constants to control the lcd

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e30dea6c0bf29ddb14920afbbb2f9862" href="#summary">const LCD_RETURN_HOME         = 0b_0000_0010
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="568beb03b3d4582d08df3566935ae1e7" href="#summary">const LCD_SET_DDRAM_ADDRESS   = 0b_1000_0000
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6e81fecb5b834b288bbb3712ab25d4e9" href="#summary">const LCD_SET_CGRAM_ADDRESS   = 0b_0100_0000
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="880a2ebac787a222ef88203208a2752e" href="#summary">const LCD_DISPLAY_ONOFF       = 0b_0000_1000
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c244f7aefd3bd0ea85be37b946c9430c" href="#summary">var volatile byte lcd_pos     = 0
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3ee03cb644ec21d386db633bf95636f0" href="#summary">const LCD_CURSOR_SHIFT_L_VAL  = 0b_0001_0000
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="2fd59388b0fd1add3738a9465b2112ce" href="#summary">lcd_clear_screen() </a></code></b>
				<p>	<pre>
lcd_clear_screen - clears the LCD

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2fc7eb74beef5bf4f0b500f28e5693b9" href="#summary">lcd_clear_line(byte in line)</a></code></b>
				<p>	<pre>
lcd_clear_line - clears the line "line" of the LCD

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5898d2e7f83c2da9c8d19cb3dd76b13a" href="#summary">lcd_shift_right(byte in nr)</a></code></b>
				<p>	<pre>
lcd_shift_right - shifts the complete display one position to the right

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="301643c918af15560fd8e280383dbf09" href="#summary">lcd_writechar(byte in data)</a></code></b>
				<p>	<pre>Deprecated
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="206bb161606abb5d9c04d67eafa6f00f" href="#summary">lcd_cursor_blink_display(bit in cursor, bit in blink, bit in display)</a></code></b>
				<p>	<pre>
lcd_cursor_blink_display - (re)sets cursor blink and puts display on/off
.
params:
   cursor:  enable or disable the fixed underline cursor
   blink:   enable or disable blinking of the block-cursor (so block blinking or off)
   display: enable or disable the whole display

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a90ac48fecc26b742b94fbeb3e5151ca" href="#summary">lcd_cursor_shift_right(byte in nr)</a></code></b>
				<p>	<pre>
lcd_cursor_shift_right - shifts cursor one position to the right

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="448216e2d5435278e723f928abc23c65" href="#summary">lcd_shift_left(byte in nr)</a></code></b>
				<p>	<pre>
lcd_shift_left - shifts the complete display one position to the left

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0ac48cf34393827d28c94f1be2cc1077" href="#summary">lcd_clearscreen() </a></code></b>
				<p>	<pre>
Deprecated
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1e00a72bbf8b23b9caa387369647867a" href="#summary">lcd_home() </a></code></b>
				<p>	<pre>
lcd_home - cursor returns home(line 0, position 0)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ba7f1015df54edd5a5c4c01371ec02b1" href="#summary">lcd_write_char(byte in data)</a></code></b>
				<p>	<pre>
lcd_write_char - write one char to LCD

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="23eee674117ffffe8e1e6e7074e9ce21" href="#summary">lcd_cursor_position(byte in line, byte in pos)</a></code></b>
				<p>	<pre>
lcd_cursor_position - Specify row and column (0-based)
.
About cursor positions: the LCDs are internally 2x40 char devices.
The first line starts at offset 0, the second line at offset 64 (0x40).
With 4 line devices the third and fourth line are addressed as extensions
of the first and second line by adding an offset. For a 4x20 line device
the offset is 20, for a 4x16 line display the offset is 16 or 20.
Declare the constant LCD_CHARS as appropriate for your screen
(you may have to specify 20 even if your display has only 16 chars!).

Note: Some 1x16 LCDs are implemented as 2x8 line LCDs, which means that
      the second half of the line has to be handled as a second line.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="78d026ee2877c7ab88bb9cc511df6ddd" href="#summary">lcd'put(byte in data)</a></code></b>
				<p>	<pre>
lcd'put - write one char to screen (pseudo var, enables streams)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c8519c651b1c7a5ef104c58d14c6b568" href="#summary">lcd_cursor_shift_left(byte in nr)</a></code></b>
				<p>	<pre>
lcd_cursor_shift_left - shifts cursor one position to the left

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="074b81381b23e1d5738a15958af57401" href="#summary">lcd_progress(byte in line, byte in amount, byte in pattern)</a></code></b>
				<p>	<pre>
lcd_progress- Displays a progress bar

The progress bar starts at position 0 of a line.

line: line on which progress bar is displayed
amount: number of bar chars that are displayed

(0xFF is a common pattern)

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="a0230e579fe2817fe6b16d876e1eac3a" href="#summary">_lcd_restore_cursor()</a></code></b>
				<p>	<pre>
_lcd_restore_cursor - sets the cursor to the position in the shadow register
(this routine is only used inside this file)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="fdb82cfd301a22ca3557543e9025de63" href="#summary">_hd44780_init()</a></code></b>
				<p>	<pre>
_hd44780_init - Initialise display (not realy internal, but not for users)

This procedure is called from lcd_init of the interface used. lcd_init brings
up the interface and powers up the display.
This procedure sets the display in the pre-defined startposition (clear
screen, no cursor etc).

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="04cc129a3e53b33917468b78565c9077" href="#summary">_lcd_line2index(byte in line) return byte</a></code></b>
				<p>	<pre>
_lcd_line2index - internal function - calculate index from line number

</pre>
</p>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
		<i>No sample found</i>

			<br/>

            </div>
        </div>


	</body>
</html>

