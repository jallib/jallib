<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>spi_master_hw - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="spi_master_hw">
    <h1>spi_master_hw</h1>
	</a>

    <div>
		<font size="+1"><i>SPI Master  (spi_master_hw.jal)</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			William Welch Copyright (c) 2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4l
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>SPI Master hardware control.
Routines for sending and receiving through the SPI in master mode
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>good overview of SPI at http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus
also at: http://elm-chan.org/docs/spi_e.html
</pre>

	</p>
	<br/>

	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#c6938bf13f609cbd337d7218e4b26268">const SPI_MODE_01 = 1
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#949c191436d088f809c31471ba62a32a">const SPI_RATE_FOSC_4 = 0
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#37e34151171cfbc69a244653a2d5c27e">const SPI_RATE_FOSC_16 = 1
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#efe871e6bf8d98dc5fc849c7335f9a75">const SPI_MODE_10 = 2
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#67b465620e2049c37d7449a93a872d9e">const SPI_RATE_TMR = 3
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e54e5ce85770f911125467977de46549">const SPI_MODE_00 = 0
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#48454e22ea26f98ef2ecdd7e33c385cf">const SPI_MODE_11 = 3
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#85919341743e148e38395b0a08565bc0">const SPI_RATE_FOSC_64 = 2
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#499831973d848eb47c580bb99f80b222">spi_master_hw'put(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5248bc528b5572282a0d7223f6fbaff8">spi_init(byte in spi_mode, byte in spi_rate)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#6c98d62c27a3ed66b39d6ee87ad50d71">spi_master_hw_exchange(byte in m_data) return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#049214a809fd9306870181b8ae73cb7e">spi_master_hw'get() return byte</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="c6938bf13f609cbd337d7218e4b26268" href="#summary">const SPI_MODE_01 = 1
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="949c191436d088f809c31471ba62a32a" href="#summary">const SPI_RATE_FOSC_4 = 0
</a></code></b>
				<p>	<pre>Use these when calling the spi_init() routine below ( SPI clock frequency )
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="37e34151171cfbc69a244653a2d5c27e" href="#summary">const SPI_RATE_FOSC_16 = 1
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="efe871e6bf8d98dc5fc849c7335f9a75" href="#summary">const SPI_MODE_10 = 2
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="67b465620e2049c37d7449a93a872d9e" href="#summary">const SPI_RATE_TMR = 3
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e54e5ce85770f911125467977de46549" href="#summary">const SPI_MODE_00 = 0
</a></code></b>
				<p>	<pre>Use these when calling the spi_init() routine below ( SPI master mode, see sources above )
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="48454e22ea26f98ef2ecdd7e33c385cf" href="#summary">const SPI_MODE_11 = 3
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="85919341743e148e38395b0a08565bc0" href="#summary">const SPI_RATE_FOSC_64 = 2
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="499831973d848eb47c580bb99f80b222" href="#summary">spi_master_hw'put(byte in data)</a></code></b>
				<p>	<pre>half-duplex convenience function. send data to slave, discard reply
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5248bc528b5572282a0d7223f6fbaff8" href="#summary">spi_init(byte in spi_mode, byte in spi_rate)</a></code></b>
				<p>	<pre>Initialize the SPI registers.
Note: check your datasheet -- TRIS settings, any SPI errata?
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="6c98d62c27a3ed66b39d6ee87ad50d71" href="#summary">spi_master_hw_exchange(byte in m_data) return byte</a></code></b>
				<p>	<pre>SPI is full-duplex, so we exchange master and slave data byte
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="049214a809fd9306870181b8ae73cb7e" href="#summary">spi_master_hw'get() return byte</a></code></b>
				<p>	<pre>half-duplex convenience function. send 0xFF, get slave data
</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_mcp2515_can_monitor.jal" target="_blank">16f819_mcp2515_can_monitor.jal</a></td>
			</tr>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_ee25aa02e48_lcd.jal" target="_blank">16f819_ee25aa02e48_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_canopen_mcp2515_txhb.jal" target="_blank">16f819_canopen_mcp2515_txhb.jal</a></td>
			</tr>
			<tr>
			<td><b>16f819</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f819_mcp2515_canid4_monitor.jal" target="_blank">16f819_mcp2515_canid4_monitor.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_sd_card.jal" target="_blank">16f877a_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_23k256.jal" target="_blank">16f877a_23k256.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_sd_card.jal" target="_blank">18f452_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_mp3_decoder_sta015_sd_card.jal" target="_blank">18f452_mp3_decoder_sta015_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_23k256.jal" target="_blank">18f452_23k256.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_fat32_sd_card.jal" target="_blank">18f452_fat32_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_mp3_decoder_sta015_pata_hard_disk.jal" target="_blank">18f452_mp3_decoder_sta015_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_fat32_pata_hard_disk.jal" target="_blank">18f452_fat32_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_mp3_decoder_vs1053b_pata_hard_disk.jal" target="_blank">18f4620_mp3_decoder_vs1053b_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_mp3_decoder_sta015_pata_hard_disk.jal" target="_blank">18f4620_mp3_decoder_sta015_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_mp3_decoder_sta015_sd_card.jal" target="_blank">18f4620_mp3_decoder_sta015_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_sd_card.jal" target="_blank">18f4620_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_mp3_decoder_vs1053b_sd_card.jal" target="_blank">18f4620_mp3_decoder_vs1053b_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_sd_card.jal" target="_blank">18f4620_fat32_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_pata_hard_disk.jal" target="_blank">18f4620_fat32_pata_hard_disk.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

