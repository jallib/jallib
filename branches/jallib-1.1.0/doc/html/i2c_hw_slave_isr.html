<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>i2c_hw_slave_isr - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="i2c_hw_slave_isr">
    <h1>i2c_hw_slave_isr</h1>
	</a>

    <div>
		<font size="+1"><i>i2c hardware slave ISR</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong, Joep Suijs, Copyright &copy; 2008-2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Joep Suijs, Albert Faber
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4i
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>this library provides an ISR to implement
a stateful i2c hardware slave. This is a jalv2 implementation of
Microchip Application Note AN734.



According to AN734, there are 5 possible i2c states. During ISR, each
of this states are detected. This ISR provides a standard skeleton to implement
an i2c hardware slaves, while client code must implement several callbacks
the ISR is expecting to call while processing states.



Here there are:
 - procedure i2c_hw_slave_on_state_1(byte in _trash):
      called when i2c address matches (master starts a talk)



 - procedure i2c_hw_slave_on_state_2(byte in rcv):
      called when master is writing a byte. Slave is thus
      receiving this byte. This callback takes this bytes as
      argument



 - procedure i2c_hw_slave_on_state_3():
      called when master wants to read a byte from slave. Thus,
      slave should send a byte (for instance, using i2c_hw_slave_write_i2c
      from i2c_hw_slave.jal library)



 - procedure i2c_hw_slave_on_state_4():
      called when master still wants to read a byte from slave. That is,
      master required to read (state 3) and now still want to read a byte



 - procedure i2c_hw_slave_on_state_5():
      called when master does not want to talk to slave anymore
      usually a good place to reset data or slave's logic



 - procedure i2c_hw_slave_on_error():
      called when something wrong happens. You can do what you want in
      this case, like resetting the PIC, log some information using usart, ...
         => called any cases other than states 1, 2, 3, 4 or 5
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>  - AN734: http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1824&appnote=en011798
</pre>

	</p>
	<br/>

	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#e4bcf072649b2d3f4c95ca04cf074b16">i2c_hw_slave_isr_handler()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="e4bcf072649b2d3f4c95ca04cf074b16" href="#summary">i2c_hw_slave_isr_handler()</a></code></b>
				<p>	<pre>i2c ISR handler. Detects states a call appropriate procedures
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f723</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f723_i2c_hw_slave_echo.jal" target="_blank">16f723_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>16f73</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f73_i2c_hw_slave_echo.jal" target="_blank">16f73_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_i2c_hw_slave_echo.jal" target="_blank">16f877_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_i2c_hw_slave_echo.jal" target="_blank">16f877a_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_servo_rc_master_dedicated_slave_i2c.jal" target="_blank">16f877a_servo_rc_master_dedicated_slave_i2c.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_i2c_hw_slave_echo.jal" target="_blank">16f88_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_i2c_hw_slave_echo.jal" target="_blank">18f14k50_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_i2c_hw_slave_echo.jal" target="_blank">18f2620_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_servo_rc_master_dedicated_slave_i2c.jal" target="_blank">18f452_servo_rc_master_dedicated_slave_i2c.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_i2c_hw_slave_echo.jal" target="_blank">18f4550_i2c_hw_slave_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_servo_rc_master_dedicated_slave_i2c.jal" target="_blank">18f4620_servo_rc_master_dedicated_slave_i2c.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

