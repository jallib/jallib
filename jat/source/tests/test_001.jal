;------------------------------------------------------------------------------
; test of flow control statements
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; Begin of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

function plus_five (byte in param) return byte is
   return param + 5
end function

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; End of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


for 10 loop

   delay_1ms(300)
   start_of_test_marker()
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; Start of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------

   ;---------------------------------------------------------------------------
   ; test of forever loop, if elsif, else, exit loop
   test_header(1)
   
   var word e
    e = 5
   
   
   forever loop   
   
      if (e == 10) then 
         e=20 
      elsif e==30 then 
         e=40 
      elsif e==50 then 
         exit loop
      else 
         e=plus_five(e) 
      end if
   
      print_var(e)
   
   end loop
   
   ;---------------------------------------------------------------------------
   ; while loop test
   test_header(2)
   
   e=0
   while (e < 35) loop  
   
      if (e == 10) then 
         e=20 
      elsif e==30 then 
         e=40 
      elsif e==60 then 
         exit loop
      else 
         e=plus_five(e) 
      end if
   
      print_var(e)
   
   end loop
   
   ;---------------------------------------------------------------------------
   ; repeat until   
   test_header(3)
   
   e = 0
   repeat
   
      if (e == 10) then 
         e=20 
      elsif e==30 then 
         e=40 
      elsif e==60 then 
         exit loop
      else 
         e=plus_five(e) 
      end if
   
      print_var(e)
   
   until(e < 35) 
   
   
   ;---------------------------------------------------------------------------
   ;  for loop
   test_header(4)
   
   e = 5
   for 4 loop
   
      e = e + 1
      print_var(e)
   
   end loop 
   
   for 4 using e loop
   
      print_var(e)
   
   end loop 
   
   ;---------------------------------------------------------------------------
   ; case and block             
   test_header(5)
   
   for 10 using e loop
      case e of
         0 : print_var(0)
         1, 2 : print_var(12)
         
         3, 4 : block 
            print_var(34)
         end block
         
         5, 6 : block
         end block
      
         otherwise print_var(100+e)
      end case
   end loop              

   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; End of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
      
end loop